# OSI 중 3계층

### 3계층의 기능

- 3계층에서 하는일
  - 3계층은 다른 네트워크 대역 즉, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어하는 일을 담당
  - 발신에서 착신까지의 패킷의 경로를 제어

- 3계층에서 쓰는 주소
  - IP 주소 : WAN에서 통신할 때 사용하는 주소
    - IPv4주소 : 현재 PC에 할당된 IP주소
    - 서브넷 마스크 : IP주소에 대한 네트워크의 대역을 규정하는 것
    - 게이트웨이 주소 : 외부와 통신할 때 사용하는 네트워크의 출입구

- 3계층 프로토콜
  - ARP 프로토콜 : IP주소를 이용해 MAC주소를 알아오는 프로토콜
  - IPv4 프로토콜 : WAN에서 통신할 때 사용하는 프로토콜
  - ICMP 프로토콜 : 서로가 통신되는지 확인할 때 사용하는 프로토콜

### 일반적인 IP주소

- Classful IP주소 : IP주소가 처음 나왔을 때 사용, 낭비가 심하다.
- Classless IP주소
  - 낭비되지 않도록 아껴쓰는 주소, 그래도 낭비가 발생한다.
  - 서브넷 마스크를 도입해서 어디까지가 네트워크 대역을 구분하는 곳인지를 구분
    - 2진수로 표기했을 때 1로 시작, 1과 1사이에는 0이 올 수 없다.
    - 1과 0이 바뀌는 곳이 네트워크를 구분하는 값
- 사설IP와 공인IP
  - 현재 사용하고 있는 IPv4의 개념
    - 정확히 말하면 Classless IP와 같이 사용
  - 공인IP : 인터넷과 통신할 때 사용하는 IP 주소
  - 사설IP : 같은 네트워크 대역에서 사용하는 IP주소
  - 사설IP를 사용하는 장비들이 네트워크 통신을 할때 무조건 공인IP로 바꿔서 통신을 한다.(낭비를 막는다.)
    - NAT라는 기술로 바꾼다.
    - IP 부족현상 해결
  - 실제 인터넷 세상에서는 공인IP로만 통신, 외부 네트워크 대역에서는 사설IP 대역이 보이지 않는다.

![사설IP와 공인IP](4장 실제로 컴퓨터끼리는 IP주소를 사용해 데이터를 주고받는다.assets/사설IP와 공인IP.PNG)

- 특수한 IP 주소
  - 0.0.0.0 : Wildcard
    - 쉽게 생각하면 나머지 모든 IP
  - 127.0.0.1 : 나 자신을 나타내는 주소
  - 게이트웨이 주소 : 어딘가로 가려면 일단 여기로



### 실습

1. 내 PC의 IP주소 확인해보기
   - 윈도우에서 간단하게 내 PC의 IP주소를 확인하는 방법 알아보기
2. 네이버 서버가 알고있는 나의 IP주소 확인해보기
   - 네이버 서버와 통신할 때 네이버 서버가 알고 있는 나의 IP주소를 알아보고 1. 에서 확인한 IP와 비교해보기

