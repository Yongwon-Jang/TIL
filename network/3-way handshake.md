μΆ‹μ•„, TCP **3-way handshake**λ” TCP μ—°κ²°μ μ‹μ‘ κ³Όμ •μ—μ„ **μ–‘μ½μ΄ μ„λ΅ ν†µμ‹ ν•  μ¤€λΉ„κ°€ λμ—μμ„ ν™•μΈν•λ” κ³Όμ •**μ΄μ•Ό.
λ‹¨κ³„λ³„λ΅ μμ„Έν μ„¤λ…ν•΄μ¤„κ².

---

# π”‘ TCP 3-way Handshake κ°λ…

**λ©μ :**

1. μ†΅μ‹ μμ™€ μμ‹ μκ°€ **μ„λ΅ μ—°κ²°ν•  μ¤€λΉ„κ°€ λμ—λ”μ§€ ν™•μΈ**
2. κ°μ **μ΄κΈ° μ‹ν€€μ¤ λ²νΈ(ISN, Initial Sequence Number)**λ¥Ό κµν™
3. μ—°κ²°μ΄ μ•μ •μ μΌλ΅ μ„¤μ •λμ—μμ„ λ³΄μ¥

> TCPλ” μ—°κ²° μ§€ν–¥(Connection-oriented) ν”„λ΅ν† μ½μ΄κΈ° λ•λ¬Έμ—, λ°μ΄ν„° μ „μ†΅ μ „μ— λ°λ“μ‹ μ—°κ²°μ„ μ„¤μ •ν•΄μ•Ό ν•¨.

---

# π”Ή λ‹¨κ³„λ³„ νλ¦„

## **1λ‹¨κ³„: SYN (Synchronize)**

* ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„λ΅ **SYN ν”λκ·Έκ°€ μ„¤μ •λ ν¨ν‚·** μ „μ†΅
* λ‚΄μ©:

    * SYN = 1
    * ν΄λΌμ΄μ–ΈνΈ ISN = x
* μλ―Έ:

    * "μ„λ²„μ•Ό, λ‚ μ—°κ²°ν•  μ¤€λΉ„ λμ–΄. λ‚΄ μ‹ν€€μ¤ λ²νΈλ” xμ•Ό."

```
Client ----SYN (seq=x)----> Server
```

---

## **2λ‹¨κ³„: SYN-ACK (Synchronize + Acknowledge)**

* μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈ ν¨ν‚·μ„ λ°›κ³  μ‘λ‹µ
* λ‚΄μ©:

    * SYN = 1 (μ„λ²„λ„ μ—°κ²° μ¤€λΉ„)
    * ACK = 1 (ν΄λΌμ΄μ–ΈνΈ SYN ν™•μΈ)
    * ACK λ²νΈ = x + 1 (ν΄λΌμ΄μ–ΈνΈ μ‹ν€€μ¤ λ²νΈ + 1)
    * μ„λ²„ ISN = y
* μλ―Έ:

    * "ν΄λΌμ΄μ–ΈνΈμ•Ό, λ‚΄ μ—°κ²° μ¤€λΉ„λμ–΄. λ„¤ SYN λ°›μ•κ³  λ‚΄ μ‹ν€€μ¤ λ²νΈλ” yμ•Ό."

```
Client <---SYN-ACK (seq=y, ack=x+1)--- Server
```

---

## **3λ‹¨κ³„: ACK (Acknowledge)**

* ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„ SYN ν™•μΈ ν›„ μ‘λ‹µ
* λ‚΄μ©:

    * ACK = 1
    * ACK λ²νΈ = y + 1 (μ„λ²„ μ‹ν€€μ¤ λ²νΈ + 1)
    * seq = x + 1 (ν΄λΌμ΄μ–ΈνΈ λ‹¤μ μ „μ†΅ν•  λ°”μ΄νΈ λ²νΈ)
* μλ―Έ:

    * "μ„λ²„μ•Ό, λ„¤ SYN ν™•μΈν–κ³  μ—°κ²°μ΄ μ„±λ¦½λμ–΄."

```
Client ----ACK (seq=x+1, ack=y+1)----> Server
```

---

# π”Ή μ—°κ²° ν™•λ¦½ μ™„λ£

* μ΄μ  **TCP μ—°κ²°μ΄ μ„±λ¦½**λμ—κ³ , μ–‘μ½μ—μ„ **λ°μ΄ν„° μ†΅μμ‹  κ°€λ¥**
* μ΄κΈ° μ‹ν€€μ¤ λ²νΈλ¥Ό κΈ°λ°μΌλ΅ λ°”μ΄νΈ μ¤νΈλ¦Ό μ „μ†΅

```
Client <=======> Server
       (λ°μ΄ν„° ν†µμ‹ )
```

---

# π”Ή μ”μ•½ κ·Έλ¦Ό

```
Client                 Server
  |--- SYN(seq=x) --->  |
  |                     |
  |<-- SYN-ACK(seq=y, ack=x+1) --|
  |--- ACK(seq=x+1, ack=y+1) --->|
  |                     |
  |--- λ°μ΄ν„° μ†΅μμ‹  μ‹μ‘ ---|
```

---

# π”Ή 3-way handshake ν•µμ‹¬ ν¬μΈνΈ

1. **SYN**: μ—°κ²° μ”μ²­ + μ΄κΈ° μ‹ν€€μ¤ λ²νΈ μ μ‹
2. **SYN-ACK**: μ”μ²­ μΉμΈ + μ„λ²„ μ΄κΈ° μ‹ν€€μ¤ λ²νΈ μ μ‹
3. **ACK**: μΉμΈ ν™•μΈ β†’ μ—°κ²° μ™„μ „ν μ„±λ¦½

> 3-way handshake λ•λ¶„μ— TCPλ” **μ—°κ²° μ§€ν–¥μ **μ΄κ³ , **λ°μ΄ν„° μμ„μ™€ μ‹ λΆ°μ„±μ„ λ³΄μ¥**ν•  μ μμ.

---

μ›ν•λ©΄ μ΄μ–΄μ„

* **FIN / 4-way termination** TCP μ—°κ²° μΆ…λ£ κ³Όμ •
* **SYN Flood κ³µκ²©κ³Ό λ°©μ–΄**
* **Handshake μ‹ν€€μ¤ λ²νΈ μλ―Έ λ° λ³΄μ• λ¬Έμ **
  λ„ μƒμ„Έν•κ² κ·Έλ¦Όκ³Ό ν•¨κ» μ„¤λ…ν•΄μ¤„ μ μμ–΄.

μ„¤λ…ν•΄μ¤„κΉ?
