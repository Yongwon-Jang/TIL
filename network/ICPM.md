ICMP(Internet Control Message Protocol)는
**인터넷 제어 메시지 프로토콜**로, **IP 네트워크에서 오류를 알리거나 상태 정보를 전달하기 위한 프로토콜**입니다.

---

## ✅ ICMP란?

> **IP 프로토콜의 부가 기능**으로, **오류 알림 및 진단 기능**을 제공합니다.
> 주로 **네트워크 장치(라우터, 게이트웨이 등)** 간의 통신 문제를 진단하고 제어 메시지를 주고받기 위해 사용됩니다.

📦 **IP 프로토콜 위에서 동작하는 Layer 3 프로토콜**입니다.
(TCP/UDP와 달리 실제 데이터 전송을 하지 않고, 상태나 오류를 알려주는 역할)

---

## ✅ ICMP의 역할

| 역할          | 설명                                                           |
| ----------- | ------------------------------------------------------------ |
| ❗ 오류 보고     | 패킷 전달 실패 시 송신자에게 알림 (예: 목적지 도달 불가)                           |
| 🔄 네트워크 진단  | `ping`, `traceroute` 같은 도구의 기반                               |
| 🚫 흐름 제어    | 과도한 트래픽 시 "속도 줄여" 알림 가능 (ICMP Source Quench – 현재는 거의 사용 안 함) |
| ↩️ 경로 변경 요청 | 라우팅 변경 요청 (Redirect 메시지)                                     |

---

## ✅ 주요 ICMP 메시지 유형

| 타입 번호 | 메시지 이름                  | 설명                               |
| ----- | ----------------------- | -------------------------------- |
| `0`   | Echo Reply              | `ping` 명령에 대한 응답                 |
| `3`   | Destination Unreachable | 목적지에 도달할 수 없음                    |
| `5`   | Redirect                | 더 나은 경로가 있을 때 라우터가 알려줌           |
| `8`   | Echo Request            | `ping` 명령의 요청                    |
| `11`  | Time Exceeded           | TTL 초과로 라우팅 실패 (traceroute에 사용됨) |

---

## ✅ 예시: `ping` 명령

```bash
ping 8.8.8.8
```

* **Echo Request (type 8)** → 대상에게 보냄
* 대상이 \*\*Echo Reply (type 0)\*\*를 보내면 응답 시간 측정

---

## ✅ 예시: `traceroute`

* 중간 라우터마다 TTL(Time To Live)을 1씩 늘리며 패킷 전송
* **TTL 초과 시 ICMP Time Exceeded 메시지**를 받음
* 이를 통해 경로 추적

---

## ✅ ICMP는 연결형인가?

❌ **아니요. ICMP는 비연결형입니다.**

* TCP처럼 세션을 유지하지 않음
* 단순히 메시지를 보내고 응답을 받을 뿐

---

## ✅ 보안 이슈: ICMP를 이용한 공격

| 공격 방식                 | 설명                                   |
| --------------------- | ------------------------------------ |
| 📶 **ICMP Flood**     | 대량의 ICMP 요청을 보내 네트워크 과부하 유도 (DoS 공격) |
| 🧲 **Ping of Death**  | 비정상적으로 큰 패킷을 보내 시스템 충돌 유발            |
| 🎯 **ICMP Tunneling** | ICMP 메시지에 몰래 데이터를 넣어 방화벽 우회          |
| 📡 **스캐닝 / 탐지**       | 네트워크 탐색 및 시스템 활성 여부 확인               |

➡️ 보안을 위해 일부 서버에서는 **ICMP 요청을 차단**하기도 합니다.

---

## ✅ 요약

| 항목     | 설명                                            |
| ------ | --------------------------------------------- |
| 정식 명칭  | Internet Control Message Protocol             |
| 동작 계층  | 네트워크 계층 (IP 위에서 동작)                           |
| 용도     | 오류 알림, 진단, 경로 제어                              |
| 예시     | ping, traceroute                              |
| 대표 메시지 | Echo Request/Reply, Destination Unreachable 등 |

---

필요하시면 Wireshark에서 ICMP 패킷을 보는 법이나, ICMP 필터링 설정도 도와드릴게요!
